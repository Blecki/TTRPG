<head>
  <style>
    .flex-container {
      display: flex;
    }
    
    body {
      padding: 2em; 
      margin: 0;
    }

    .flex-left {
      width: 50%;
      height: 25vh;
      padding: 5px;
    }

    .flex-right {
        width: 50%;
        padding: 5px;
    }
  </style>
  <script src="factory.js?v=2"></script>
  <script src="character.js?v=2"></script>
  <script src="sheet.js?v=2"></script>
</head>

<body>
  <div class="flex-container">
    <div style="width:33%; border:1px solid black; border-radius: 5px; padding:5px; margin:5px;">
      <div>
        Level: 
        <select id="LEVEL_SELECT" onchange="CHARACTER_BASE.setLevel(this.value);">
          <option value=1>1</option>
          <option value=2>2</option>
          <option value=3>3</option>
          <option value=4>4</option>
          <option value=5>5</option>
          <option value=6>6</option>
          <option value=7>7</option>
          <option value=8>8</option>
          <option value=9>9</option>
          <option value=10>10</option>
          <option value=11>11</option>
          <option value=12>12</option>
          <option value=13>13</option>
          <option value=14>14</option>
          <option value=15>15</option>
          <option value=16>16</option>
          <option value=17>17</option>
          <option value=18>18</option>
          <option value=19>19</option>
          <option value=20>20</option>
          <option value=21>21</option>
          <option value=22>22</option>
        </select>
      </div>
      <div>Available Features: <span id="COUNT_AVAILABLE_FEATURES"></span></div>
      <div>
        <table>
          <tr><td>STR:</td><td><select id="STR_SELECT" onchange="CHARACTER_BASE.setStat('STR',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_STR"></span></td><td>MOD:</td><td><span id="MOD_STR"></span></td></tr>
          <tr><td>DEX:</td><td><select id="DEX_SELECT" onchange="CHARACTER_BASE.setStat('DEX',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_DEX"></span></td><td>MOD:</td><td><span id="MOD_DEX"></span></td></tr>
          <tr><td>CON:</td><td><select id="CON_SELECT" onchange="CHARACTER_BASE.setStat('CON',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_CON"></span></td><td>MOD:</td><td><span id="MOD_CON"></span></td></tr>
          <tr><td>INT:</td><td><select id="INT_SELECT" onchange="CHARACTER_BASE.setStat('INT',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_INT"></span></td><td>MOD:</td><td><span id="MOD_INT"></span></td></tr>
          <tr><td>WIS:</td><td><select id="WIS_SELECT" onchange="CHARACTER_BASE.setStat('WIS',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_WIS"></span></td><td>MOD:</td><td><span id="MOD_WIS"></span></td></tr>
          <tr><td>CHA:</td><td><select id="CHA_SELECT" onchange="CHARACTER_BASE.setStat('CHA',parseInt(this.value));"></select><td><td>FINAL:</td><td><span id="FINAL_CHA"></span></td><td>MOD:</td><td><span id="MOD_CHA"></span></td></tr>
        </table>
      </div>
      <div>Armor Class: <span id="FINAL_ARMOR_CLASS"></span></div>
      <div>Hit Points: <span id="FINAL_HIT_POINTS"></span></div>
      <div>Proficiency Bonus: <span id="FINAL_PROFICIENCY_BONUS"></span></div>
      <div>Feature Points: <span id="FINAL_FEATURE_POINTS"></span></div>
    </div>
    <div style="width:33%; border:1px solid black; border-radius: 5px; padding:5px; margin:5px;">
      <div><h3>Proficiencies</h3></div>
      <div id="PROFICIENCIES"></div>
      <div><h3>Other Proficiencies</h3></div>
      <div id="OTHER_PROFICIENCIES"></div>
    </div>
    <div style="width:33%; border:1px solid black; border-radius: 5px; padding:5px; margin:5px;">
      <div><h3>Additional Features</h3></div>
      <div id="ADDITIONAL_FEATURES"></div>
    </div>
  </div>
        

  <div class="flex-container">
    <div class="flex-left">
      <div><h3>Features Selected</h3></div>
      <div id="SELECTED_FEATURES"></div>
    </div>
    <div class="flex-right">
      <div><h3>Choose from these features.</h3></div>
      <div>
        Filter by Tag: <select id="FILTER_TAG" onchange="SHEET.refresh()"><option value="">All</option></select> 
        <input type="checkbox" id="FILTER_AVAILABLE" checked onchange="SHEET.refresh()"></input>Available Only
      </div>
      <div>Search: <input type="test" id="SEARCH_FEATURE" onchange="SHEET.refresh()"></input></div>
      <div id="AVAILABLE_FEATURES"></div>
    </div>
  </div>
    
</body>


<script>
  /* To implement: 
    Backgrounds? 
      - One off features - select 'one from this set', does not count against total.
    The entire feature list
    Spells as features
    Equipment (applied after the features)
    Hover popups on every possible calculation to explain where the total came from.
  */

  var STATS_LIST = [
    "STR", "DEX", "CON", "INT", "WIS", "CHA" 
  ];

  var PROFICIENCIES = [];
  var FEATURES = [];

  function makeBaseProficiencies() {
    var r = [];
    for (var prof of PROFICIENCIES)
      r.push({NAME: prof.NAME, STAT: prof.STAT, MULTIPLIER: 0, BONUS: 0 });
    return r;
  }


  SHEET.load();

</script>